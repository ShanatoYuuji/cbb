<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="keywords" content="一矢光明的主页" />
		<meta name="description" content="数据库查询ajax" />
		<title>数据库查询</title>
	</head>

	<body>
		<div id="myDdv">
			<h3>Let Ajax change this text</h3>
			<input type="button" onclick="" value="change Content"></input>
			<input  id="intxt_para" type="text" />
			 <input id="pagecount" type="number" value="1"/>
			<div id="T1" style="border:1px solid black;"></div><br />
			<button onclick="loadXMLDoc('test_xmlhttp2.txt')">Click</button>
			<button onclick="eg.searchee()">WE</button>
		</div>
	</body>

	<script type="text/javascript">
		
		var eg={};
		eg.searchee=function (){
			var searchpara=eg.$('intxt_para').value;
			loadXMLDoc(searchpara);
		}
		eg.$=function(id){
			return document.getElementById(id);
		}
		
		var xmlhttp;
		function loadXMLDoc(url) {
			xmlhttp = null;
			if(window.XMLHttpRequest) {
				xmlhttp = new XMLHttpRequest();
			}
			if(xmlhttp != null) {
				xmlhttp.onreadystatechange = state_Change;
				url=url+".";
				url=url+document.getElementById("pagecount").value;
				xmlhttp.open("GET", url, true);
				xmlhttp.send(null);
			} else {
				alert("Your browser does not support XMLHTTP.")
			}
		}

		function state_Change() {
			if(xmlhttp.readyState == 4) {
				if(xmlhttp.status == 200) {
					//200="OK"
					document.getElementById('T1').innerHTML = xmlhttp.responseText;
				} else {
					alert("Problem retrieving data:" + xmlhttp.statusText);
				}
			}
		}
	</script>

</html>